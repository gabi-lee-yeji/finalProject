<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="spring.project.mapper.HelpMapper">
	
	<insert id="addNotice" parameterType="spring.project.model.Post_BoardDTO">
		insert into post_board values (
			board_seq.nextval,   
			#{subject},
			#{post_content},
			#{writer},
			sysdate,
			#{post_group},
			#{post_level},
			#{board_type},
			0,
			#{img, jdbcType=VARCHAR}
			)
	</insert>
	
	<select id="noticeLists" resultType="spring.project.model.Post_BoardDTO"
							parameterType="int">
		<![CDATA[
			select * from 
				(select post_board.*, rownum r from 
					(select * from post_board order by pNum desc, post_level) post_board where board_type='공지사항')
						where r >= #{startRow} and r <= #{endRow}
		]]>
	</select>
	
	<select id="noticeCount" resultType="int">
		select count(*) from post_board where board_type='공지사항'
	</select>
	
	<select id="noticeContent" resultType="spring.project.model.Post_BoardDTO">
		select * from Post_Board where pnum=#{pnum}
	</select>
	
	<update id="modNotice">
		update post_board set 
			subject=#{subject},
			post_content=#{post_content},	
			reg=sysdate
				where pnum=#{pnum}
	</update>
	
	<update id="delNotice">
		delete post_board where pnum=#{pnum}
	</update>
	
	<select id="passwdCheck" parameterType="String"
								resultType="int">
		select count(*) from memberinfo where memid=#{memid} and passwd=#{passwd}
	</select>
	
	<insert id="addNotice111" parameterType="spring.project.model.Post_BoardDTO">
		insert into post_board values (
			board_seq.nextval,   
			#{subject, jdbcType=VARCHAR},
			#{post_content, jdbcType=VARCHAR},
			#{writer, jdbcType=VARCHAR},
			sysdate,
			#{post_group, jdbcType=NUMERIC},
			#{post_level, jdbcType=NUMERIC},
			#{board_type},
			#{readCnt, jdbcType=NUMERIC},
			#{img, jdbcType=VARCHAR}
			)
	</insert>
	
	<update id="upReadCnt" parameterType="spring.project.model.Post_BoardDTO">
		update post_board set readcnt=readcnt+1 where pnum=#{pnum}
	</update>

	
	
</mapper>
